# ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãƒ»ãƒ¡ãƒˆãƒªã‚¯ã‚¹

## Cinecom ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ - ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–ãƒ»åˆ†æ

### æ¦‚è¦

æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€Cinecomãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°æˆ¦ç•¥ã¨ãƒ¡ãƒˆãƒªã‚¯ã‚¹å®šç¾©ã‚’è©³è¿°ã—ã¾ã™ã€‚ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆã§ã®åŒ…æ‹¬çš„ãªç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚Šã€ã‚·ã‚¹ãƒ†ãƒ ã®å¥å…¨æ€§ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ã‚’ç¶™ç¶šçš„ã«æ¸¬å®šãƒ»æ”¹å–„ã—ã¾ã™ã€‚

### ç›£è¦–æˆ¦ç•¥

#### **ç›£è¦–ã®4ã¤ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼**

```yaml
1. ã‚¤ãƒ³ãƒ•ãƒ©ç›£è¦–:
   å¯¾è±¡: ã‚µãƒ¼ãƒãƒ¼ãƒ»ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ»ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
   ãƒ¡ãƒˆãƒªã‚¯ã‚¹: CPU, Memory, Disk, Network
   
2. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç›£è¦–:
   å¯¾è±¡: ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ãƒ»APIãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
   ãƒ¡ãƒˆãƒªã‚¯ã‚¹: ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“, ã‚¨ãƒ©ãƒ¼ç‡, ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ
   
3. ãƒ“ã‚¸ãƒã‚¹ç›£è¦–:
   å¯¾è±¡: ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•ãƒ»ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ãƒ»KPI
   ãƒ¡ãƒˆãƒªã‚¯ã‚¹: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°, æ¤œç´¢å›æ•°, ç™»éŒ²æ•°
   
4. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£è¦–:
   å¯¾è±¡: ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹ãƒ»è„†å¼±æ€§ãƒ»ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹
   ãƒ¡ãƒˆãƒªã‚¯ã‚¹: å¤±æ•—ãƒ­ã‚°ã‚¤ãƒ³, ç•°å¸¸ãƒ‘ã‚¿ãƒ¼ãƒ³, ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆ
```

#### **è¦³æ¸¬å¯èƒ½æ€§ (Observability) ã®3ã¤ã®æŸ±**

```yaml
Metrics (ãƒ¡ãƒˆãƒªã‚¯ã‚¹):
  - æ•°å€¤ãƒ‡ãƒ¼ã‚¿ã®æ™‚ç³»åˆ—åé›†
  - ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ã®å®šé‡çš„æŠŠæ¡
  - ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆåŸºæº–

Logs (ãƒ­ã‚°):
  - ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ã‚¨ãƒ©ãƒ¼ã®è©³ç´°è¨˜éŒ²
  - å•é¡Œã®æ ¹æœ¬åŸå› åˆ†æ
  - ç›£æŸ»è¨¼è·¡ãƒ»ãƒ‡ãƒãƒƒã‚°æƒ…å ±

Traces (ãƒˆãƒ¬ãƒ¼ã‚¹):
  - ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®åˆ†æ•£è¿½è·¡
  - ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹é–“ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ç‰¹å®š
```

### ãƒ¡ãƒˆãƒªã‚¯ã‚¹åˆ†é¡ãƒ»å®šç¾©

#### **ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ¡ãƒˆãƒªã‚¯ã‚¹**

**ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹**:

```yaml
CPU ãƒ¡ãƒˆãƒªã‚¯ã‚¹:
  - cpu_usage_percent: CPUä½¿ç”¨ç‡ï¼ˆ%ï¼‰
    - ç›®æ¨™: å¹³å‡60%ä»¥ä¸‹ã€ãƒ”ãƒ¼ã‚¯80%ä»¥ä¸‹
    - ç›£è¦–é–“éš”: 1åˆ†
    - ã‚¢ãƒ©ãƒ¼ãƒˆ: 85%è¶…éã§è­¦å‘Šã€95%è¶…éã§é‡å¤§
  
  - cpu_load_average: ãƒ­ãƒ¼ãƒ‰ã‚¢ãƒ™ãƒ¬ãƒ¼ã‚¸
    - ç›®æ¨™: 1åˆ†å¹³å‡ãŒCPUã‚³ã‚¢æ•°ä»¥ä¸‹
    - ç›£è¦–é–“éš”: 1åˆ†

Memory ãƒ¡ãƒˆãƒªã‚¯ã‚¹:
  - memory_usage_percent: ãƒ¡ãƒ¢ãƒªä½¿ç”¨ç‡ï¼ˆ%ï¼‰
    - ç›®æ¨™: å¹³å‡70%ä»¥ä¸‹ã€ãƒ”ãƒ¼ã‚¯85%ä»¥ä¸‹
    - ã‚¢ãƒ©ãƒ¼ãƒˆ: 90%è¶…éã§è­¦å‘Šã€95%è¶…éã§é‡å¤§
  
  - memory_available_bytes: åˆ©ç”¨å¯èƒ½ãƒ¡ãƒ¢ãƒªï¼ˆbytesï¼‰
  - swap_usage_percent: ã‚¹ãƒ¯ãƒƒãƒ—ä½¿ç”¨ç‡ï¼ˆ%ï¼‰
    - ç›®æ¨™: 10%ä»¥ä¸‹

Disk ãƒ¡ãƒˆãƒªã‚¯ã‚¹:
  - disk_usage_percent: ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨ç‡ï¼ˆ%ï¼‰
    - ç›®æ¨™: 80%ä»¥ä¸‹
    - ã‚¢ãƒ©ãƒ¼ãƒˆ: 85%è¶…éã§è­¦å‘Šã€90%è¶…éã§é‡å¤§
  
  - disk_io_read_bytes_per_sec: èª­ã¿å–ã‚ŠI/Oï¼ˆbytes/secï¼‰
  - disk_io_write_bytes_per_sec: æ›¸ãè¾¼ã¿I/Oï¼ˆbytes/secï¼‰

Network ãƒ¡ãƒˆãƒªã‚¯ã‚¹:
  - network_bytes_received_per_sec: å—ä¿¡ãƒã‚¤ãƒˆï¼ˆbytes/secï¼‰
  - network_bytes_sent_per_sec: é€ä¿¡ãƒã‚¤ãƒˆï¼ˆbytes/secï¼‰
  - network_connections_active: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ¥ç¶šæ•°
```

**ã‚³ãƒ³ãƒ†ãƒŠãƒ¡ãƒˆãƒªã‚¯ã‚¹**:

```yaml
Docker ãƒ¡ãƒˆãƒªã‚¯ã‚¹:
  - container_cpu_usage: ã‚³ãƒ³ãƒ†ãƒŠCPUä½¿ç”¨ç‡
  - container_memory_usage: ã‚³ãƒ³ãƒ†ãƒŠãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
  - container_network_io: ã‚³ãƒ³ãƒ†ãƒŠãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯I/O
  - container_restart_count: ã‚³ãƒ³ãƒ†ãƒŠå†èµ·å‹•å›æ•°
    - ç›®æ¨™: 1æ—¥1å›ä»¥ä¸‹
    - ã‚¢ãƒ©ãƒ¼ãƒˆ: 1æ™‚é–“ã«3å›ä»¥ä¸Šã§è­¦å‘Š

Pod ãƒ¡ãƒˆãƒªã‚¯ã‚¹ (Kubernetesä½¿ç”¨æ™‚):
  - pod_cpu_requests: CPUè¦æ±‚é‡
  - pod_memory_requests: ãƒ¡ãƒ¢ãƒªè¦æ±‚é‡
  - pod_ready_status: Podæº–å‚™çŠ¶æ…‹
  - pod_phase: Podãƒ•ã‚§ãƒ¼ã‚ºï¼ˆRunning/Pending/Failedï¼‰
```

#### **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒˆãƒªã‚¯ã‚¹**

**HTTP API ãƒ¡ãƒˆãƒªã‚¯ã‚¹**:

```yaml
ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“:
  - http_request_duration_seconds: HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†æ™‚é–“
    - ãƒ©ãƒ™ãƒ«: method, path, status_code, service
    - ç›®æ¨™: 95%ile < 500ms
    - ç›£è¦–: ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ï¼ˆãƒã‚±ãƒƒãƒˆ: 0.1, 0.5, 1, 2, 5ç§’ï¼‰

ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ:
  - http_requests_total: ç·ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°
    - ãƒ©ãƒ™ãƒ«: method, path, status_code, service
    - ç›£è¦–é–“éš”: 1åˆ†é–“éš”ã®ãƒ¬ãƒ¼ãƒˆ

ã‚¨ãƒ©ãƒ¼ç‡:
  - http_requests_error_rate: ã‚¨ãƒ©ãƒ¼ç‡ï¼ˆ%ï¼‰
    - è¨ˆç®—: 5xx errors / total requests * 100
    - ç›®æ¨™: 0.1%ä»¥ä¸‹
    - ã‚¢ãƒ©ãƒ¼ãƒˆ: 1%è¶…éã§è­¦å‘Šã€5%è¶…éã§é‡å¤§

å¯ç”¨æ€§:
  - http_service_availability: ã‚µãƒ¼ãƒ“ã‚¹å¯ç”¨æ€§ï¼ˆ%ï¼‰
    - è¨ˆç®—: (total - 5xx errors) / total * 100
    - ç›®æ¨™: 99.9%ä»¥ä¸Š
```

**ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹å›ºæœ‰ãƒ¡ãƒˆãƒªã‚¯ã‚¹**:

```yaml
user-service:
  - authentication_attempts_total: èªè¨¼è©¦è¡Œå›æ•°
  - authentication_success_rate: èªè¨¼æˆåŠŸç‡ï¼ˆ%ï¼‰
    - ç›®æ¨™: 98%ä»¥ä¸Š
  - jwt_token_issued_total: JWTãƒˆãƒ¼ã‚¯ãƒ³ç™ºè¡Œæ•°
  - oauth_login_total: OAuth ãƒ­ã‚°ã‚¤ãƒ³æ•°
  - user_registration_total: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ•°

movie-service:
  - movie_search_requests_total: æ˜ ç”»æ¤œç´¢ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°
  - movie_search_duration_seconds: æ¤œç´¢å‡¦ç†æ™‚é–“
    - ç›®æ¨™: 95%ile < 400ms
  - movie_cache_hit_rate: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡ï¼ˆ%ï¼‰
    - ç›®æ¨™: 80%ä»¥ä¸Š
  - movie_database_queries_total: DB ã‚¯ã‚¨ãƒªå®Ÿè¡Œæ•°

actor-service:
  - actor_search_requests_total: ä¿³å„ªæ¤œç´¢ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°
  - filmography_requests_total: ãƒ•ã‚£ãƒ«ãƒ¢ã‚°ãƒ©ãƒ•ã‚£ãƒ¼å–å¾—æ•°
  - cast_relation_queries_total: ã‚­ãƒ£ã‚¹ãƒˆé–¢ä¿‚ã‚¯ã‚¨ãƒªæ•°

scene-service:
  - scene_search_requests_total: ã‚·ãƒ¼ãƒ³æ¤œç´¢ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°
  - scene_categorization_requests_total: ã‚·ãƒ¼ãƒ³åˆ†é¡ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°
  - scene_recommendation_requests_total: ã‚·ãƒ¼ãƒ³æ¨è–¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°

review-service:
  - review_submission_total: ãƒ¬ãƒ“ãƒ¥ãƒ¼æŠ•ç¨¿æ•°
  - rating_calculation_duration_seconds: è©•ä¾¡è¨ˆç®—æ™‚é–“
  - watchlist_operations_total: ã‚¦ã‚©ãƒƒãƒãƒªã‚¹ãƒˆæ“ä½œæ•°
```

#### **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹**

**PostgreSQL ãƒ¡ãƒˆãƒªã‚¯ã‚¹**:

```yaml
æ¥ç¶šãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹:
  - postgresql_connections_active: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ¥ç¶šæ•°
    - ç›®æ¨™: æœ€å¤§æ¥ç¶šæ•°ã®70%ä»¥ä¸‹
  - postgresql_connections_max: æœ€å¤§æ¥ç¶šæ•°è¨­å®šå€¤
  - postgresql_query_duration_seconds: ã‚¯ã‚¨ãƒªå®Ÿè¡Œæ™‚é–“
    - ç›®æ¨™: 95%ile < 200ms
  - postgresql_slow_queries_total: ã‚¹ãƒ­ãƒ¼ã‚¯ã‚¨ãƒªæ•°
    - ç›®æ¨™: 1æ™‚é–“ã‚ãŸã‚Š10ä»¶ä»¥ä¸‹

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±è¨ˆ:
  - postgresql_database_size_bytes: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µã‚¤ã‚º
  - postgresql_table_size_bytes: ãƒ†ãƒ¼ãƒ–ãƒ«ã‚µã‚¤ã‚º
  - postgresql_index_usage_rate: ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½¿ç”¨ç‡ï¼ˆ%ï¼‰
    - ç›®æ¨™: 95%ä»¥ä¸Š
  - postgresql_cache_hit_rate: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡ï¼ˆ%ï¼‰
    - ç›®æ¨™: 95%ä»¥ä¸Š

ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³:
  - postgresql_transactions_total: ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç·æ•°
  - postgresql_transaction_rollback_rate: ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ç‡ï¼ˆ%ï¼‰
    - ç›®æ¨™: 1%ä»¥ä¸‹
  - postgresql_deadlocks_total: ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯ç™ºç”Ÿæ•°
    - ç›®æ¨™: 1æ—¥1ä»¶ä»¥ä¸‹
```

**Redis ãƒ¡ãƒˆãƒªã‚¯ã‚¹**:

```yaml
ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹:
  - redis_commands_processed_total: å‡¦ç†ã‚³ãƒãƒ³ãƒ‰ç·æ•°
  - redis_command_duration_seconds: ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚é–“
  - redis_keyspace_hits_total: ã‚­ãƒ¼ãƒ’ãƒƒãƒˆæ•°
  - redis_keyspace_misses_total: ã‚­ãƒ¼ãƒŸã‚¹æ•°
  - redis_hit_rate: ãƒ’ãƒƒãƒˆç‡ï¼ˆ%ï¼‰
    - è¨ˆç®—: hits / (hits + misses) * 100
    - ç›®æ¨™: 90%ä»¥ä¸Š

ãƒ¡ãƒ¢ãƒªä½¿ç”¨:
  - redis_memory_used_bytes: ä½¿ç”¨ãƒ¡ãƒ¢ãƒªé‡
  - redis_memory_max_bytes: æœ€å¤§ãƒ¡ãƒ¢ãƒªè¨­å®š
  - redis_memory_fragmentation_ratio: ãƒ¡ãƒ¢ãƒªæ–­ç‰‡åŒ–ç‡
    - ç›®æ¨™: 1.5ä»¥ä¸‹

æ¥ç¶š:
  - redis_connected_clients: æ¥ç¶šã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ•°
  - redis_blocked_clients: ãƒ–ãƒ­ãƒƒã‚¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ•°
  - redis_rejected_connections_total: æ‹’å¦æ¥ç¶šæ•°
```

#### **ãƒ“ã‚¸ãƒã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹**

**ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•ãƒ¡ãƒˆãƒªã‚¯ã‚¹**:

```yaml
ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆ:
  - daily_active_users: æ—¥æ¬¡ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°
  - weekly_active_users: é€±æ¬¡ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°
  - monthly_active_users: æœˆæ¬¡ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°
  - session_duration_seconds: ã‚»ãƒƒã‚·ãƒ§ãƒ³ç¶™ç¶šæ™‚é–“
    - ç›®æ¨™: å¹³å‡5åˆ†ä»¥ä¸Š
  - page_views_total: ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼ç·æ•°
  - bounce_rate: ç›´å¸°ç‡ï¼ˆ%ï¼‰
    - ç›®æ¨™: 60%ä»¥ä¸‹

æ¤œç´¢ãƒ»ç™ºè¦‹:
  - search_queries_total: æ¤œç´¢ã‚¯ã‚¨ãƒªç·æ•°
  - search_results_clicked_total: æ¤œç´¢çµæœã‚¯ãƒªãƒƒã‚¯æ•°
  - search_success_rate: æ¤œç´¢æˆåŠŸç‡ï¼ˆ%ï¼‰
    - è¨ˆç®—: ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸæ¤œç´¢ / ç·æ¤œç´¢ * 100
    - ç›®æ¨™: 70%ä»¥ä¸Š
  - recommendation_clicks_total: æ¨è–¦ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¯ãƒªãƒƒã‚¯æ•°

ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ©ç”¨:
  - movie_details_views_total: æ˜ ç”»è©³ç´°ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼æ•°
  - actor_profiles_views_total: ä¿³å„ªãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ“ãƒ¥ãƒ¼æ•°
  - scene_views_total: ã‚·ãƒ¼ãƒ³è©³ç´°ãƒ“ãƒ¥ãƒ¼æ•°
  - watchlist_additions_total: ã‚¦ã‚©ãƒƒãƒãƒªã‚¹ãƒˆè¿½åŠ æ•°
  - reviews_submitted_total: ãƒ¬ãƒ“ãƒ¥ãƒ¼æŠ•ç¨¿æ•°
```

**ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ãƒ¡ãƒˆãƒªã‚¯ã‚¹**:

```yaml
æˆé•·æŒ‡æ¨™:
  - user_registrations_total: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ•°
  - user_retention_rate_7d: 7æ—¥é–“ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¶™ç¶šç‡ï¼ˆ%ï¼‰
    - ç›®æ¨™: 60%ä»¥ä¸Š
  - user_retention_rate_30d: 30æ—¥é–“ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¶™ç¶šç‡ï¼ˆ%ï¼‰
    - ç›®æ¨™: 40%ä»¥ä¸Š

ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å“è³ª:
  - content_rating_average: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å¹³å‡è©•ä¾¡
    - ç›®æ¨™: 4.0ä»¥ä¸Šï¼ˆ5ç‚¹æº€ç‚¹ï¼‰
  - reviews_per_movie_average: æ˜ ç”»ã‚ãŸã‚Šå¹³å‡ãƒ¬ãƒ“ãƒ¥ãƒ¼æ•°
    - ç›®æ¨™: 5ä»¶ä»¥ä¸Š
  - high_quality_reviews_ratio: é«˜å“è³ªãƒ¬ãƒ“ãƒ¥ãƒ¼ç‡ï¼ˆ%ï¼‰
    - å®šç¾©: 100æ–‡å­—ä»¥ä¸Šã®ãƒ¬ãƒ“ãƒ¥ãƒ¼
    - ç›®æ¨™: 60%ä»¥ä¸Š

æ©Ÿèƒ½åˆ©ç”¨:
  - feature_adoption_rate: æ©Ÿèƒ½æ¡ç”¨ç‡ï¼ˆ%ï¼‰
    - å¯¾è±¡: ã‚·ãƒ¼ãƒ³æ¤œç´¢ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ç­‰
  - advanced_search_usage_rate: é«˜åº¦æ¤œç´¢åˆ©ç”¨ç‡ï¼ˆ%ï¼‰
  - mobile_usage_rate: ãƒ¢ãƒã‚¤ãƒ«åˆ©ç”¨ç‡ï¼ˆ%ï¼‰
```

### ç›£è¦–ãƒ„ãƒ¼ãƒ«ãƒ»ã‚¤ãƒ³ãƒ•ãƒ©

#### **ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†ã‚·ã‚¹ãƒ†ãƒ **

**Prometheus è¨­å®š**:

```yaml
# prometheus.yml
global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  - job_name: 'user-service'
    static_configs:
      - targets: ['user-service:3001']
    metrics_path: /metrics
    scrape_interval: 10s
  
  - job_name: 'movie-service'
    static_configs:
      - targets: ['movie-service:3002']
    metrics_path: /metrics
    scrape_interval: 10s
  
  - job_name: 'postgresql'
    static_configs:
      - targets: ['postgres-exporter:9187']
  
  - job_name: 'redis'
    static_configs:
      - targets: ['redis-exporter:9121']

rule_files:
  - "alert_rules.yml"

alerting:
  alertmanagers:
    - static_configs:
        - targets: ['alertmanager:9093']
```

**Node.js ãƒ¡ãƒˆãƒªã‚¯ã‚¹å®Ÿè£…**:

```typescript
// metrics.service.ts
import { Injectable } from '@nestjs/common';
import { register, Counter, Histogram, Gauge } from 'prom-client';

@Injectable()
export class MetricsService {
  // HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆé–¢é€£
  private httpRequestTotal = new Counter({
    name: 'http_requests_total',
    help: 'Total number of HTTP requests',
    labelNames: ['method', 'path', 'status_code', 'service'],
  });

  private httpRequestDuration = new Histogram({
    name: 'http_request_duration_seconds',
    help: 'HTTP request duration in seconds',
    labelNames: ['method', 'path', 'status_code', 'service'],
    buckets: [0.1, 0.5, 1, 2, 5],
  });

  // ãƒ“ã‚¸ãƒã‚¹é–¢é€£
  private userRegistrations = new Counter({
    name: 'user_registrations_total',
    help: 'Total number of user registrations',
  });

  private searchQueries = new Counter({
    name: 'search_queries_total',
    help: 'Total number of search queries',
    labelNames: ['search_type', 'service'],
  });

  // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é–¢é€£
  private dbConnectionsActive = new Gauge({
    name: 'database_connections_active',
    help: 'Number of active database connections',
    labelNames: ['database', 'service'],
  });

  recordHttpRequest(method: string, path: string, statusCode: number, duration: number, service: string) {
    this.httpRequestTotal.labels(method, path, statusCode.toString(), service).inc();
    this.httpRequestDuration.labels(method, path, statusCode.toString(), service).observe(duration);
  }

  recordUserRegistration() {
    this.userRegistrations.inc();
  }

  recordSearchQuery(searchType: string, service: string) {
    this.searchQueries.labels(searchType, service).inc();
  }

  setDatabaseConnections(count: number, database: string, service: string) {
    this.dbConnectionsActive.labels(database, service).set(count);
  }

  getMetrics() {
    return register.metrics();
  }
}

// metrics.middleware.ts
import { Injectable, NestMiddleware } from '@nestjs/common';
import { Request, Response, NextFunction } from 'express';
import { MetricsService } from './metrics.service';

@Injectable()
export class MetricsMiddleware implements NestMiddleware {
  constructor(private metricsService: MetricsService) {}

  use(req: Request, res: Response, next: NextFunction) {
    const startTime = Date.now();
    
    res.on('finish', () => {
      const duration = (Date.now() - startTime) / 1000;
      this.metricsService.recordHttpRequest(
        req.method,
        req.route?.path || req.path,
        res.statusCode,
        duration,
        process.env.SERVICE_NAME || 'unknown'
      );
    });
    
    next();
  }
}
```

#### **ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¨­è¨ˆ**

**Grafana ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ§‹æˆ**:

```yaml
ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰:
  ç›®çš„: ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®å¥å…¨æ€§ä¸€ç›®æŠŠæ¡
  æœŸé–“: ç›´è¿‘24æ™‚é–“ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ï¼‰
  
  ãƒ‘ãƒãƒ«æ§‹æˆ:
    - ã‚µãƒ¼ãƒ“ã‚¹ç¨¼åƒçŠ¶æ³ï¼ˆç·‘/èµ¤ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼‰
    - å…¨ä½“ã‚¨ãƒ©ãƒ¼ç‡ãƒ»ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“
    - ãƒªã‚¯ã‚¨ã‚¹ãƒˆç·æ•°ãƒ»ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°
    - ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨ç‡
    - é‡è¦ã‚¢ãƒ©ãƒ¼ãƒˆä¸€è¦§

ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹è©³ç´°ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰:
  ç›®çš„: å„ã‚µãƒ¼ãƒ“ã‚¹ã®è©³ç´°ç›£è¦–
  æ§‹æˆ: ã‚µãƒ¼ãƒ“ã‚¹åˆ¥å€‹åˆ¥ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
  
  å…±é€šãƒ‘ãƒãƒ«:
    - API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆåˆ¥ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“
    - ã‚¨ãƒ©ãƒ¼ç‡ãƒ»ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ
    - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªæ€§èƒ½
    - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡
    - ãƒ“ã‚¸ãƒã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹

ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰:
  ç›®çš„: ã‚¤ãƒ³ãƒ•ãƒ©ãƒªã‚½ãƒ¼ã‚¹ç›£è¦–
  
  ãƒ‘ãƒãƒ«æ§‹æˆ:
    - CPUãƒ»ãƒ¡ãƒ¢ãƒªãƒ»ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨ç‡
    - ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯I/O
    - ã‚³ãƒ³ãƒ†ãƒŠçŠ¶æ…‹ãƒ»ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨
    - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãƒ»æ€§èƒ½
    - ã‚­ãƒ£ãƒƒã‚·ãƒ¥çŠ¶æ…‹

ãƒ“ã‚¸ãƒã‚¹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰:
  ç›®çš„: ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ãƒ»KPIç›£è¦–
  
  ãƒ‘ãƒãƒ«æ§‹æˆ:
    - ãƒ¦ãƒ¼ã‚¶ãƒ¼æˆé•·ãƒ»ç¶™ç¶šç‡
    - æ¤œç´¢ãƒ»ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ©ç”¨çŠ¶æ³
    - ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç‡
    - æ©Ÿèƒ½æ¡ç”¨ç‡
    - åç›Šé–¢é€£æŒ‡æ¨™ï¼ˆå°†æ¥æ‹¡å¼µï¼‰
```

### ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š

#### **ã‚¢ãƒ©ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ«å®šç¾©**

**é‡å¤§åº¦åˆ¥ã‚¢ãƒ©ãƒ¼ãƒˆ**:

```yaml
Critical (é‡å¤§):
  æ¡ä»¶: ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢ãƒ»é‡å¤§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŠ£åŒ–
  é€šçŸ¥: å³åº§ï¼ˆSlack + PagerDuty + ãƒ¡ãƒ¼ãƒ«ï¼‰
  
  ãƒ«ãƒ¼ãƒ«ä¾‹:
    - APIå¯ç”¨æ€§ < 95% (5åˆ†é–“)
    - ã‚¨ãƒ©ãƒ¼ç‡ > 5% (5åˆ†é–“)
    - ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ 95%ile > 2ç§’ (10åˆ†é–“)
    - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šå¤±æ•—ç‡ > 10% (2åˆ†é–“)

Warning (è­¦å‘Š):
  æ¡ä»¶: æ€§èƒ½åŠ£åŒ–ãƒ»ãƒªã‚½ãƒ¼ã‚¹ä¸è¶³ã®å…†å€™
  é€šçŸ¥: 15åˆ†ä»¥å†…ï¼ˆSlack + ãƒ¡ãƒ¼ãƒ«ï¼‰
  
  ãƒ«ãƒ¼ãƒ«ä¾‹:
    - CPUä½¿ç”¨ç‡ > 80% (15åˆ†é–“)
    - ãƒ¡ãƒ¢ãƒªä½¿ç”¨ç‡ > 85% (10åˆ†é–“)
    - ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨ç‡ > 85% (30åˆ†é–“)
    - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡ < 80% (30åˆ†é–“)

Info (æƒ…å ±):
  æ¡ä»¶: ç›£è¦–å€¤ã®å¤‰åŒ–ãƒ»æ³¨æ„ãŒå¿…è¦ãªçŠ¶æ³
  é€šçŸ¥: 1æ™‚é–“ä»¥å†…ï¼ˆSlack ã®ã¿ï¼‰
  
  ãƒ«ãƒ¼ãƒ«ä¾‹:
    - ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†é€šçŸ¥
    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ•°æ€¥å¢—
    - æ–°æ©Ÿèƒ½åˆ©ç”¨é–‹å§‹
    - å®šæœŸãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹å®Œäº†
```

**Prometheus Alert Rules**:

```yaml
# alert_rules.yml
groups:
  - name: service_availability
    rules:
      - alert: ServiceDown
        expr: up == 0
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: "Service {{ $labels.instance }} is down"
          description: "{{ $labels.instance }} has been down for more than 1 minute"

      - alert: HighErrorRate
        expr: rate(http_requests_total{status_code=~"5.."}[5m]) / rate(http_requests_total[5m]) > 0.05
        for: 5m
        labels:
          severity: critical
        annotations:
          summary: "High error rate on {{ $labels.service }}"
          description: "Error rate is {{ $value | humanizePercentage }} on {{ $labels.service }}"

      - alert: HighResponseTime
        expr: histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m])) > 2
        for: 10m
        labels:
          severity: warning
        annotations:
          summary: "High response time on {{ $labels.service }}"
          description: "95th percentile response time is {{ $value }}s on {{ $labels.service }}"

  - name: infrastructure
    rules:
      - alert: HighCpuUsage
        expr: 100 - (avg by(instance) (irate(node_cpu_seconds_total{mode="idle"}[5m])) * 100) > 80
        for: 15m
        labels:
          severity: warning
        annotations:
          summary: "High CPU usage on {{ $labels.instance }}"
          description: "CPU usage is {{ $value }}% on {{ $labels.instance }}"

      - alert: HighMemoryUsage
        expr: (1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100 > 85
        for: 10m
        labels:
          severity: warning
        annotations:
          summary: "High memory usage on {{ $labels.instance }}"
          description: "Memory usage is {{ $value }}% on {{ $labels.instance }}"

  - name: database
    rules:
      - alert: DatabaseConnectionFailure
        expr: rate(postgresql_connection_errors_total[5m]) / rate(postgresql_connections_total[5m]) > 0.1
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: "High database connection failure rate"
          description: "Database connection failure rate is {{ $value | humanizePercentage }}"

      - alert: SlowQueries
        expr: postgresql_slow_queries_total > 10
        for: 60m
        labels:
          severity: warning
        annotations:
          summary: "High number of slow queries"
          description: "{{ $value }} slow queries detected in the last hour"
```

#### **é€šçŸ¥è¨­å®š**

**Alertmanagerè¨­å®š**:

```yaml
# alertmanager.yml
global:
  slack_api_url: '${SLACK_WEBHOOK_URL}'

route:
  group_by: ['alertname', 'cluster', 'service']
  group_wait: 10s
  group_interval: 10s
  repeat_interval: 1h
  receiver: 'default'
  routes:
    - match:
        severity: critical
      receiver: 'critical-alerts'
    - match:
        severity: warning
      receiver: 'warning-alerts'

receivers:
  - name: 'default'
    slack_configs:
      - channel: '#cinecom-alerts'
        title: 'Alert: {{ .GroupLabels.alertname }}'
        text: '{{ range .Alerts }}{{ .Annotations.description }}{{ end }}'

  - name: 'critical-alerts'
    slack_configs:
      - channel: '#cinecom-critical'
        title: 'ğŸš¨ Critical Alert: {{ .GroupLabels.alertname }}'
        text: '{{ range .Alerts }}{{ .Annotations.description }}{{ end }}'
        color: 'danger'
    email_configs:
      - to: 'oncall@cinecom.com'
        subject: 'Critical Alert: {{ .GroupLabels.alertname }}'
        body: '{{ range .Alerts }}{{ .Annotations.description }}{{ end }}'

  - name: 'warning-alerts'
    slack_configs:
      - channel: '#cinecom-warnings'
        title: 'âš ï¸ Warning: {{ .GroupLabels.alertname }}'
        text: '{{ range .Alerts }}{{ .Annotations.description }}{{ end }}'
        color: 'warning'
```

### ãƒ­ã‚°ç®¡ç†

#### **æ§‹é€ åŒ–ãƒ­ã‚°**

**ãƒ­ã‚°ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¨™æº–**:

```yaml
æ¨™æº–ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:
  timestamp: ISO 8601å½¢å¼
  level: DEBUG/INFO/WARN/ERROR/FATAL
  service: ã‚µãƒ¼ãƒ“ã‚¹å
  version: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³
  request_id: ãƒªã‚¯ã‚¨ã‚¹ãƒˆè¿½è·¡ID
  user_id: ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆè©²å½“æ™‚ï¼‰
  message: ãƒ­ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  context: è¿½åŠ ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±

ä¾‹ï¼ˆJSONå½¢å¼ï¼‰:
{
  "timestamp": "2025-08-22T14:30:00.123Z",
  "level": "ERROR",
  "service": "movie-service",
  "version": "1.2.3",
  "request_id": "req-abc123",
  "user_id": "user-456",
  "message": "Database query failed",
  "context": {
    "query": "SELECT * FROM movies WHERE id = $1",
    "error": "connection timeout",
    "duration_ms": 5000
  }
}
```

**Winstonè¨­å®šä¾‹**:

```typescript
// logger.config.ts
import { createLogger, format, transports } from 'winston';

const logger = createLogger({
  level: process.env.LOG_LEVEL || 'info',
  format: format.combine(
    format.timestamp(),
    format.errors({ stack: true }),
    format.json()
  ),
  defaultMeta: {
    service: process.env.SERVICE_NAME,
    version: process.env.SERVICE_VERSION,
  },
  transports: [
    new transports.Console(),
    new transports.File({ 
      filename: 'logs/error.log', 
      level: 'error' 
    }),
    new transports.File({ 
      filename: 'logs/combined.log' 
    }),
  ],
});

// æœ¬ç•ªç’°å¢ƒã§ã¯Sentryã«ã‚¨ãƒ©ãƒ¼ã‚’é€ä¿¡
if (process.env.NODE_ENV === 'production') {
  logger.add(new transports.Http({
    host: 'logs.cinecom.com',
    port: 443,
    path: '/api/logs',
  }));
}

export default logger;
```

#### **ãƒ­ã‚°é›†ç´„ãƒ»åˆ†æ**

**ELK Stackè¨­å®š**ï¼ˆå°†æ¥æ‹¡å¼µï¼‰:

```yaml
Elasticsearch:
  ç›®çš„: ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ä¿å­˜ãƒ»æ¤œç´¢
  è¨­å®š:
    - ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹: cinecom-logs-YYYY.MM.DD
    - ä¿æŒæœŸé–“: 30æ—¥é–“
    - ãƒ¬ãƒ—ãƒªã‚«: 1
    - ã‚·ãƒ£ãƒ¼ãƒ‰: 1ï¼ˆå°è¦æ¨¡æ§‹æˆï¼‰

Logstash:
  ç›®çš„: ãƒ­ã‚°å¤‰æ›ãƒ»å‰å‡¦ç†
  è¨­å®š:
    - å…¥åŠ›: Filebeat from services
    - ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼: JSONè§£æãƒ»ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ­£è¦åŒ–
    - å‡ºåŠ›: Elasticsearch + ã‚¢ãƒ©ãƒ¼ãƒˆ

Kibana:
  ç›®çš„: ãƒ­ã‚°å¯è¦–åŒ–ãƒ»åˆ†æ
  ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰:
    - ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°åˆ†æ
    - ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ•ãƒ­ãƒ¼è¿½è·¡
    - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ
    - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆ
```

### åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°

#### **ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°å®Ÿè£…**

**OpenTelemetryè¨­å®š**:

```typescript
// tracing.ts
import { NodeSDK } from '@opentelemetry/sdk-node';
import { getNodeAutoInstrumentations } from '@opentelemetry/auto-instrumentations-node';
import { JaegerExporter } from '@opentelemetry/exporter-jaeger';

const jaegerExporter = new JaegerExporter({
  endpoint: process.env.JAEGER_ENDPOINT || 'http://localhost:14268/api/traces',
});

const sdk = new NodeSDK({
  traceExporter: jaegerExporter,
  instrumentations: [getNodeAutoInstrumentations()],
  serviceName: process.env.SERVICE_NAME,
  serviceVersion: process.env.SERVICE_VERSION,
});

sdk.start();

// ã‚«ã‚¹ã‚¿ãƒ ã‚¹ãƒ‘ãƒ³ä½œæˆä¾‹
import { trace } from '@opentelemetry/api';

const tracer = trace.getTracer('movie-service');

export async function searchMovies(query: string) {
  const span = tracer.startSpan('movie.search');
  
  try {
    span.setAttributes({
      'movie.search.query': query,
      'movie.search.type': 'fulltext',
    });
    
    const results = await performSearch(query);
    
    span.setAttributes({
      'movie.search.results.count': results.length,
    });
    
    return results;
  } catch (error) {
    span.recordException(error);
    span.setStatus({ code: 2, message: error.message });
    throw error;
  } finally {
    span.end();
  }
}
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–

#### **SLAç›£è¦–**

**Service Level Indicators (SLI)**:

```yaml
å¯ç”¨æ€§SLI:
  å®šç¾©: HTTP 200-499 ãƒ¬ã‚¹ãƒãƒ³ã‚¹ / å…¨HTTPãƒ¬ã‚¹ãƒãƒ³ã‚¹
  æ¸¬å®š: Prometheus counter ãƒ¡ãƒˆãƒªã‚¯ã‚¹
  ç›®æ¨™å€¤: 99.9%

ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“SLI:
  å®šç¾©: 95%ile ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ < 500ms
  æ¸¬å®š: Prometheus histogram ãƒ¡ãƒˆãƒªã‚¯ã‚¹
  ç›®æ¨™å€¤: 500msä»¥ä¸‹

ã‚¨ãƒ©ãƒ¼ç‡SLI:
  å®šç¾©: HTTP 5xx ã‚¨ãƒ©ãƒ¼ / å…¨HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆ
  æ¸¬å®š: Prometheus counter ãƒ¡ãƒˆãƒªã‚¯ã‚¹
  ç›®æ¨™å€¤: 0.1%ä»¥ä¸‹
```

**Error Budgetè¨ˆç®—**:

```yaml
å¯ç”¨æ€§Error Budget:
  ç›®æ¨™: 99.9% (æœˆé–“43åˆ†ã®ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ è¨±å®¹)
  è¨ˆç®—: (1 - 0.999) * 30æ—¥ * 24æ™‚é–“ * 60åˆ† = 43.2åˆ†
  ç›£è¦–: æœˆåˆã«ãƒªã‚»ãƒƒãƒˆã€æ¶ˆè²»ç‡ã‚’è¿½è·¡

ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“Error Budget:
  ç›®æ¨™: 95%ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒ500msä»¥ä¸‹
  è¨ˆç®—: 5%ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒ500msè¶…éè¨±å®¹
  ç›£è¦–: 1æ—¥å˜ä½ã§è¿½è·¡ã€è¶…éæ™‚ã‚¢ãƒ©ãƒ¼ãƒˆ
```

### é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **å“è³ªåŸºæº–**: `/docs/operations/quality_standards.md` - å“è³ªç›®æ¨™ãƒ»åŸºæº–è©³ç´°
- **ã‚¢ãƒ©ãƒ¼ãƒˆå¯¾å¿œ**: `/docs/operations/incident_response.md` - ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œæ‰‹é †
- **CI/CDç›£è¦–**: `/docs/development/ci_cd_pipeline.md` - ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ç›£è¦–
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£è¦–**: `/docs/security/monitoring.md` - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆç›£è¦–

### æ›´æ–°å±¥æ­´

- **v1.0** (2025-08-22): åˆç‰ˆä½œæˆ - åŸºæœ¬ç›£è¦–æˆ¦ç•¥ãƒ»ãƒ¡ãƒˆãƒªã‚¯ã‚¹å®šç¾©
- **æ¬¡å›æ›´æ–°äºˆå®š**: Phase 1å®Œäº†æ™‚ï¼ˆWeek 2çµ‚äº†æ™‚ï¼‰- å®Ÿè£…çµæœã«ã‚ˆã‚‹èª¿æ•´

---

**é‡è¦**: ç›£è¦–ã¯ã€Œè¦³æ¸¬â†’åˆ†æâ†’æ”¹å–„ã€ã®ã‚µã‚¤ã‚¯ãƒ«ã§ã™ã€‚ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’åé›†ã™ã‚‹ã ã‘ã§ãªãã€ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æ´å¯Ÿã‚’å¾—ã¦ç¶™ç¶šçš„æ”¹å–„ã«æ´»ç”¨ã—ã¦ãã ã•ã„ã€‚
