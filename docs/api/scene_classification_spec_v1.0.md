# シーン分類詳細仕様書（v1.0）

**作成日**: 2025年4月8日
**作成者**: 要件定義エージェント
**承認者**: 田中氏、佐藤氏、山田氏
**関連調査**: R-001（シーン分類システム詳細仕様策定）

---

## 1. 概要

### 1.1 目的

映画シーンの自動分類システムにおける詳細仕様を定義し、分類の一貫性と品質を確保する。

### 1.2 適用範囲

- Cinecomプラットフォームの全映画コンテンツ
- MVP段階：100作品
- Phase 2以降：500作品〜1,000作品

### 1.3 基本方針

- **ユーザビリティ優先**: 一般映画愛好家が直感的に理解できる分類
- **実用性重視**: 配給・宣伝業務で活用可能な詳細度
- **学術的厳密性**: 映画理論に基づく客観的基準
- **段階的品質向上**: 手動→半自動→自動の段階的実装

---

## 2. シーン分類体系

### 2.1 階層構造

```text
レベル1（大分類）：基本ジャンル
├─ レベル2（中分類）：シーン機能・タイプ
   ├─ レベル3（小分類）：具体的行動・内容
      └─ レベル4（感情・雰囲気タグ）：体感・印象
```

### 2.2 レベル1：基本ジャンル分類

| 分類ID | 分類名 | 定義 | 判定基準 |
|--------|--------|------|----------|
| A | アクション | 物理的動作・運動が主体のシーン | 動的要素が占める画面時間 > 60% |
| R | 恋愛 | 恋愛関係・感情表現が主体のシーン | 恋愛関係者間の相互作用が中心 |
| C | コメディ | 笑い・ユーモアが主体のシーン | 笑いを誘う演出・台詞が存在 |
| S | サスペンス | 緊張感・謎解きが主体のシーン | 不確実性・緊張感の演出が中心 |
| D | ドラマ | 人間関係・対話が主体のシーン | 対話・感情表現が画面時間 > 50% |
| O | その他 | 上記に分類されない一般シーン | 日常・風景・移動等の描写的シーン |

### 2.3 レベル2：中分類（シーン機能）

#### A-アクション系

- **A1-格闘**: 肉弾戦・武術・スポーツ対戦
- **A2-追跡**: カーチェイス・逃走・追跡劇
- **A3-銃撃**: 射撃戦・武器使用・戦闘
- **A4-爆破**: 爆発・破壊・災害シーン
- **A5-スタント**: 高所・危険行為・特殊演出

#### R-恋愛系

- **R1-出会い**: 初対面・運命的出会い
- **R2-デート**: 約束・データシーン・親密時間
- **R3-告白**: 愛の告白・プロポーズ
- **R4-別れ**: 別れ・失恋・関係終了
- **R5-復縁**: 和解・関係修復・再結合

#### C-コメディ系

- **C1-ギャグ**: 意図的笑い・コント・一発芸
- **C2-ユーモア**: 日常的笑い・機知・軽妙
- **C3-パロディ**: 模倣・風刺・オマージュ
- **C4-失敗**: 失敗・ドジ・予期しない笑い

#### S-サスペンス系

- **S1-謎解き**: 推理・調査・証拠収集
- **S2-緊迫**: 危機・脅威・時間制限
- **S3-隠密**: 潜入・隠蔽・秘密行動
- **S4-追跡**: サスペンス的追跡・尾行

#### D-ドラマ系

- **D1-対話**: 重要な会話・議論・相談
- **D2-感情**: 感情表現・心境変化・内面描写
- **D3-関係**: 人間関係・家族・友情
- **D4-成長**: 成長・変化・自己発見

#### O-その他

- **O1-日常**: 日常生活・ルーティン
- **O2-風景**: 景観・環境描写
- **O3-移動**: 移動・旅行・場面転換
- **O4-回想**: フラッシュバック・記憶・回想

### 2.4 レベル3：具体的行動（詳細分類）

各中分類について、具体的な行動・内容をさらに細分化：

**例：A1-格闘の詳細分類**:

- A1-1: 素手格闘（ボクシング、空手等）
- A1-2: 武器格闘（剣道、刀剣等）
- A1-3: スポーツ対戦（球技、競技等）
- A1-4: 集団戦闘（乱闘、軍事戦闘）

### 2.5 レベル4：感情・雰囲気タグ

| タグID | タグ名 | 定義 | 適用条件 |
|--------|--------|------|----------|
| T01 | 緊張感 | 不安・緊迫した雰囲気 | 音楽・演出で緊張感を演出 |
| T02 | 感動的 | 心を動かす・涙を誘う | 感情的音楽+クローズアップ |
| T03 | 爽快 | 気持ちよい・スッキリする | 解決・達成感の演出 |
| T04 | コミカル | 面白い・笑える | 笑いの要素・軽妙な演出 |
| T05 | 悲しい | 悲哀・哀愁感 | 悲しい音楽+表情演出 |
| T06 | ロマンチック | 恋愛的・情感的 | 恋愛シーンでの美しい演出 |
| T07 | スリリング | 興奮・刺激的 | 高揚感のある音楽・演出 |
| T08 | 静謐 | 静か・落ち着いた | 音響が少ない・穏やかな演出 |

---

## 3. 分類判定基準

### 3.1 基本判定ルール

#### 3.1.1 主要素判定

- **複数要素がある場合**: 画面時間の50%以上を占める要素を主分類とする
- **同程度の場合**: より特徴的・印象的な要素を採用
- **判定困難な場合**: 「その他(O)」に分類し、備考欄に詳細記載

#### 3.1.2 時間基準

- **最小シーン長**: 5秒以上を1シーンとして認定
- **分類判定時間**: シーン全体の60%以上で判定
- **要素持続時間**: 特定要素が3秒以上継続した場合に要素として認定

#### 3.1.3 時間境界による独立分類（田中氏提案採用）

- **基本方針**: 複合要素は時間軸で分離し、それぞれ独立したシーンとして分類
- **分割基準**: 主要素が変化した時点でシーン境界を設定
- **最小時間単位**: 5秒以上を独立シーンとして認定
- **重複許可**: 同一時間帯に複数の独立シーンが存在可能

#### 分離例

```text
【従来の複合判定】
0:52:35-0:58:32: A1格闘+C1ギャグ+T04コミカル

【改善後の独立分類】
0:52:35-0:58:32: A1格闘 (メインシーン)
0:53:46-0:54:15: C1ギャグ (格闘中の笑い要素)
0:56:20-0:56:45: T04コミカル (全体の雰囲気)
```

### 3.2 客観的判定基準

#### 3.2.1 映像解析基準

- **動き量**: フレーム間差分値で動的レベル測定
- **色調**: 暖色系(恋愛)、寒色系(サスペンス)、明度(コメディ/ドラマ)
- **カット数**: 1分間のカット数でテンポ感測定
- **構図**: クローズアップ率、アングル変化で感情度測定

#### 3.2.2 音響解析基準

- **音量レベル**: 静寂(ドラマ) < 普通(日常) < 大音量(アクション)
- **音楽ジャンル**: 楽器構成・テンポで感情分析
- **効果音**: 銃声・爆発音(アクション)、笑い声(コメディ)等
- **台詞感情値**: 音声分析による感情価判定

#### 3.2.3 演出要素基準

- **ライティング**: 明暗比・影の使い方で雰囲気判定
- **カメラワーク**: 手ブレ(緊迫感)、滑らか(ロマンス)等
- **編集リズム**: カット切り替え頻度でテンション測定

---

## 4. 分類例・サンプル

### 4.1 標準分類例

#### アクション系

```text
【カーチェイスシーン】
- 主分類: A2-追跡
- 副分類: なし
- 感情タグ: T07-スリリング
- 判定根拠: 車両追跡が85%、効果音大、高速カット編集
- 記録形式: A2+T07
```

```text
【格闘シーン】
- 主分類: A1-格闘
- 副分類: A1-1-素手格闘
- 感情タグ: T01-緊張感
- 判定根拠: 肉弾戦90%、緊張音楽、クローズアップ多用
- 記録形式: A1-1+T01
```

#### 恋愛系

```text
【告白シーン】
- 主分類: R3-告白
- 副分類: なし
- 感情タグ: T06-ロマンチック、T02-感動的
- 判定根拠: 愛の告白台詞、美しい背景、感動音楽
- 記録形式: R3+T06+T02
```

#### 時間境界分離シーン（田中氏提案適用）

```text
【格闘シーン中のコメディ要素】
シーン1（メイン）:
- 時間: 0:52:35-0:58:32
- 分類: A1-格闘
- 感情タグ: なし
- sceneType: primary

シーン2（ネスト）:
- 時間: 0:53:46-0:54:15
- 分類: C1-ギャグ
- 感情タグ: T04-コミカル
- sceneType: nested
- parentSceneId: シーン1のID

シーン3（オーバーレイ）:
- 時間: 0:56:20-0:56:45
- 分類: その他
- 感情タグ: T04-コミカル
- sceneType: overlay
- parentSceneId: シーン1のID
```

### 4.2 境界線判定例

#### ケース1: アクション vs サスペンス

```text
【カーチェイス vs 逃走劇】
- 高速・爽快感重視 → A2-追跡+T07-スリリング
- 緊迫・不安感重視 → S2-緊迫+T01-緊張感
- 判定ポイント: 音楽・演出の雰囲気で区別
```

#### ケース2: ドラマ vs 恋愛

```text
【感情表現シーン】
- 恋愛関係者間の対話 → R系分類
- 家族・友人との感情対話 → D2-感情
- 判定ポイント: 関係性の種類で区別
```

---

## 5. 品質管理基準

### 5.1 分類品質指標

#### 5.1.1 一致率目標

- **分類者間一致率**: 80%以上を維持
- **専門家確認一致率**: 90%以上を目標
- **ユーザー満足度**: フィードバック調査で75%以上

#### 5.1.2 信頼性係数

- **Cronbach's α**: 0.8以上を維持目標
- **測定頻度**: 月次で100シーンをサンプル検証
- **改善基準**: 0.75未満の場合は基準見直し

### 5.2 品質確保プロセス

#### 5.2.1 段階的確認プロセス

```text
1. 初期分類（担当者）
   ↓
2. 専門家レビュー（映画知識者）
   ↓
3. 複数人確認（3名以上で合議）
   ↓
4. 最終承認（品質管理責任者）
```

#### 5.2.2 例外処理ルール

- **分類困難シーン**: 「その他」分類+詳細備考
- **意見分散シーン**: 多数決+少数意見記録
- **新規パターン**: 基準追加検討+暫定分類

### 5.3 継続的改善

#### 5.3.1 定期見直し

- **月次レビュー**: 分類精度・一致率確認
- **四半期改訂**: 基準・ガイドライン更新
- **年次評価**: 分類体系全体の見直し

#### 5.3.2 フィードバック収集

- **ユーザー報告**: 不正確分類の報告受付
- **専門家意見**: 定期的な専門家からの助言
- **データ分析**: 検索・利用パターンからの改善点抽出

---

## 6. 技術的要件

### 6.1 データ構造定義

#### 6.1.1 シーン分類データモデル（時間境界対応版）

```json
{
  "sceneId": "string",
  "movieId": "string",
  "startTime": "number", // 秒単位（例: 3155 = 0:52:35）
  "endTime": "number",   // 秒単位（例: 3512 = 0:58:32）
  "classification": {
    "level1": "string",    // 単一分類のみ（例: "A"）
    "level2": "string",    // 単一分類のみ（例: "A1"）
    "level3": "string",    // 単一分類のみ（例: "A1-1"）
    "emotionTags": ["string"] // 複数可（例: ["T01", "T04"]）
  },
  "sceneType": "string",   // "primary" | "nested" | "overlay"
  "parentSceneId": "string", // ネストした子シーンの場合のみ
  "confidence": "number",
  "classifiedBy": "string",
  "verifiedBy": "string",
  "lastUpdated": "datetime"
}
```

#### 時間境界シーン分類の種類

- **primary**: メインシーン（例: 0:52:35-0:58:32の格闘シーン）
- **nested**: メイン内の独立要素（例: 0:53:46-0:54:15のギャグ要素）
- **overlay**: 全体に重なる雰囲気（例: 0:56:20-0:56:45のコミカル感）

#### 6.1.2 必須フィールド（山田氏提案により拡張）

- シーンID、映画ID、**開始・終了時間（全シーン必須）**
- レベル1分類（必須）
- **sceneType**（primary/nested/overlay、必須）
- 分類者・確認者情報
- 最終更新日時

#### 6.1.3 オプションフィールド

- レベル2・3詳細分類
- 感情タグ（複数可）
- 分類確信度（0.0-1.0）
- parentSceneId（nested/overlayの場合のみ）
- 備考・コメント

#### 6.1.4 時間境界の必須化根拠（山田氏提案）

```text
学術的価値:
- 正確な引用・参照の実現
- 研究データとしての客観性確保
- 映画分析の再現性向上

実用的価値:
- 映像検索・確認の効率化
- 配給業務での正確な素材管理
- ユーザー体験の向上（該当シーンへの直接アクセス）

技術的一貫性:
- 全シーンでの統一的データ構造
- 検索アルゴリズムの最適化
- システム処理の単純化・高速化
```

### 6.2 検索・取得要件

#### 6.2.1 基本検索機能

- 単一分類での絞り込み
- 複数分類でのAND・OR検索
- 感情タグでの絞り込み
- 時間長での絞り込み

#### 6.2.2 時間ベース検索機能（山田氏提案対応）

- **時間範囲検索**: 指定秒数内のシーン抽出
- **映像直接アクセス**: 検索結果から該当シーンへのジャンプ
- **時間重複検索**: 同一時間帯の複数シーン（primary+nested+overlay）
- **シーン長検索**: 指定時間長のシーン検索

#### 6.2.3 高度検索機能

- 類似シーン検索（時間情報含む）
- 分類組み合わせ検索
- 映画横断でのシーン検索
- 分類精度による絞り込み
- **学術引用支援**: 正確な時間情報でのシーン引用

---

## 7. 実装優先度

### 7.1 MVP段階（Phase 1）

- **必須実装**: レベル1基本分類、**全シーンの時間境界**
- **推奨実装**: 主要なレベル2分類（各分類の代表的なもの）
- **推奨実装**: sceneType分類（primary必須、nested推奨）
- **オプション**: 感情タグ（基本的なもののみ）、overlay分類

### 7.2 Phase 2段階

- **レベル3詳細分類**: 全分類への展開
- **全感情タグ**: 8種類全ての実装
- **検索機能強化**: 複合検索・類似検索

### 7.3 Phase 3段階

- **AI支援機能**: 自動分類候補提案
- **分析機能**: 分類統計・トレンド分析
- **カスタマイズ**: ユーザー独自分類設定

---

## 8. 成功基準・KPI

### 8.1 品質KPI

- 分類一致率: 80%以上
- 専門家承認率: 90%以上
- ユーザー満足度: 75%以上（5点満点中3.75点）

### 8.2 効率KPI

- 1シーン分類時間: 3分以下
- 1作品完了時間: 30時間以下
- エラー・やり直し率: 10%以下

### 8.3 利用KPI

- シーン検索利用率: 月間アクティブユーザーの60%以上
- 分類別検索分散度: 全分類が月1回以上利用
- 検索満足度: 検索結果への満足度70%以上

---

**承認**:

- 田中氏（映画愛好家代表）: ☑ 承認
- 佐藤氏（配給会社代表）: ☑ 承認
- 山田氏（映画評論家代表）: ☑ 承認

**次回更新**: 2025年5月8日（1ヶ月後レビュー予定）
